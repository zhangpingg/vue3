import{_ as v,r as i,o as c,c as n,F as g,n as L,a as p,p as $,d as b,k as I,S as x,g as _,q as f}from"./index-PeL4Jeqv.js";const y=o=>($("data-v-445c7ac2"),o=o(),b(),o),E={class:"box"},S=y(()=>p("h1",null,"图片懒加载",-1)),z=["src","onLoad","onError"],D={__name:"LoadingLazyDemo",setup(o){const s=i([{url:"https://picsum.photos/800/400?random=1",loaded:!1},{url:"https://picsum.photos/800/400?random=2",loaded:!1},{url:"https://picsum.photos/800/400?random=3",loaded:!1},{url:"https://picsum.photos/800/400?random=4",loaded:!1},{url:"https://picsum.photos/800/400?random=5",loaded:!1},{url:"https://picsum.photos/800/400?random=6",loaded:!1},{url:"https://picsum.photos/800/400?random=7",loaded:!1},{url:"https://picsum.photos/800/400?random=8",loaded:!1},{url:"https://picsum.photos/800/400?random=9",loaded:!1},{url:"https://picsum.photos/800/400?random=10",loaded:!1}]),u=t=>{console.log(`图片 ${t+1} 加载成功`),s.value[t].loaded=!0},m=t=>{console.error(`图片 ${t+1} 加载失败`)};return(t,h)=>(c(),n("div",E,[S,(c(!0),n(g,null,L(s.value,(a,e)=>(c(),n("div",{key:e,class:"box-item"},[p("img",{src:a.url,style:{width:"100%",height:"400px"},onLoad:r=>u(e),onError:r=>m(e),loading:"lazy"},null,40,z)]))),128))]))}},k=v(D,[["__scopeId","data-v-445c7ac2"]]),w=o=>($("data-v-3126756f"),o=o(),b(),o),O={class:"box"},B=w(()=>p("h1",null,"图片懒加载",-1)),N=["src","data-index","data-src","onLoad","onError"],q={__name:"IntersectionObserverDemo",setup(o){const s=i(),u=i([{url:"https://picsum.photos/800/400?random=1",loaded:!1},{url:"https://picsum.photos/800/400?random=2",loaded:!1},{url:"https://picsum.photos/800/400?random=3",loaded:!1},{url:"https://picsum.photos/800/400?random=4",loaded:!1},{url:"https://picsum.photos/800/400?random=5",loaded:!1},{url:"https://picsum.photos/800/400?random=6",loaded:!1},{url:"https://picsum.photos/800/400?random=7",loaded:!1},{url:"https://picsum.photos/800/400?random=8",loaded:!1},{url:"https://picsum.photos/800/400?random=9",loaded:!1},{url:"https://picsum.photos/800/400?random=10",loaded:!1}]),m=()=>{s.value=new IntersectionObserver((e,r)=>{e.forEach(l=>{if(l.isIntersecting){const d=l.target;d.src=d.dataset.src,u.value[Number(d.dataset.index)].loaded=!0,d.classList.remove("imglazyLoad"),r.unobserve(d)}})},{root:null,rootMargin:"200px",threshold:.1}),document.querySelectorAll(".imglazyLoad").forEach(e=>{s.value.observe(e)})},t=a=>{console.log(`图片 ${a+1} 加载成功`)},h=a=>{console.error(`图片 ${a+1} 加载失败`)};return I(()=>{m()}),x(()=>{s.value&&(s.value.disconnect(),s.value=null)}),(a,e)=>(c(),n("div",O,[B,(c(!0),n(g,null,L(u.value,(r,l)=>(c(),n("div",{key:l,class:"box-item"},[p("img",{src:r.loaded?r.url:"","data-index":l,"data-src":r.url,class:"imglazyLoad",style:{width:"100%",height:"400px"},onLoad:d=>t(l),onError:d=>h(l)},null,40,N)]))),128))]))}},F=v(q,[["__scopeId","data-v-3126756f"]]),M=p("hr",{class:"mt-20 mb-20"},null,-1),A={__name:"index",setup(o){return(s,u)=>(c(),n("div",null,[_(f(k)),M,_(f(F))]))}};export{A as default};
//# sourceMappingURL=index-C7PM285c.js.map
