{"version":3,"file":"index-BjancOdt.js","sources":["../../src/pages/vitePluginDemo/index.vue"],"sourcesContent":["<template>\r\n    <div>vite 插件、vitePluginCheckVersion.js</div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from 'vue';\r\nimport { Modal } from 'view-ui-plus';\r\n\r\nconst timer = ref();\r\n\r\nconst checkUpdate = async () => {\r\n    let res = await fetch('/vue3/versionData.json', {\r\n        headers: {\r\n            'Cache-Control': 'no-cache'\r\n        }\r\n    }).then((r) => r.json());\r\n    if (!localStorage.getItem('demo_version')) {\r\n        localStorage.setItem('demo_version', res.version);\r\n    } else {\r\n        console.log('新版本时间戳', res.version);\r\n        if (res.version != localStorage.getItem('demo_version')) {\r\n            localStorage.setItem('demo_version', res.version);\r\n            Modal.confirm({\r\n                title: '检测到新版本，是否更新？',\r\n                content: '新版本内容：' + res.content,\r\n                okText: '更新',\r\n                cancelText: '取消',\r\n                onOk: () => {\r\n                    window.location.reload();\r\n                }\r\n            });\r\n        }\r\n    }\r\n};\r\n\r\nonMounted(() => {\r\n    clearInterval(timer.value);\r\n    timer.value = setInterval(async () => {\r\n        checkUpdate();\r\n    }, 3000);\r\n});\r\n</script>\r\n\r\n<style lang=\"less\" scoped></style>\r\n\r\n"],"names":["timer","ref","checkUpdate","res","r","Modal","onMounted"],"mappings":"gGAQA,MAAMA,EAAQC,EAAG,EAEXC,EAAc,SAAY,CAC5B,IAAIC,EAAM,MAAM,MAAM,yBAA0B,CAC5C,QAAS,CACL,gBAAiB,UACpB,CACT,CAAK,EAAE,KAAMC,GAAMA,EAAE,KAAM,CAAA,EAClB,aAAa,QAAQ,cAAc,GAGpC,QAAQ,IAAI,SAAUD,EAAI,OAAO,EAC7BA,EAAI,SAAW,aAAa,QAAQ,cAAc,IAClD,aAAa,QAAQ,eAAgBA,EAAI,OAAO,EAChDE,EAAAA,MAAM,QAAQ,CACV,MAAO,eACP,QAAS,SAAWF,EAAI,QACxB,OAAQ,KACR,WAAY,KACZ,KAAM,IAAM,CACR,OAAO,SAAS,QACnB,CACjB,CAAa,IAbL,aAAa,QAAQ,eAAgBA,EAAI,OAAO,CAgBxD,EAEA,OAAAG,EAAU,IAAM,CACZ,cAAcN,EAAM,KAAK,EACzBA,EAAM,MAAQ,YAAY,SAAY,CAClCE,GACH,EAAE,GAAI,CACX,CAAC"}