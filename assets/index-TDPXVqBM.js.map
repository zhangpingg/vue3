{"version":3,"file":"index-TDPXVqBM.js","sources":["../../src/pages/formInTable/index.vue"],"sourcesContent":["<template>\r\n    <div class=\"fit\">\r\n        <ZpTablePage :tableConfig=\"tablePageData.tableConfig\" :isHasPage=\"false\">\r\n            <template #bb=\"{ scope: { row, $index } }\">\r\n                <el-form :model=\"row\" :ref=\"formRefs[$index]\" inline>\r\n                    是否必填：{{ !!row.bbb }}\r\n                    <el-form-item prop=\"bb\" :rules=\"[{ required: !!row.bbb, message: '请选择时间' }]\">\r\n                        <el-date-picker\r\n                            v-model=\"row.bb\"\r\n                            type=\"date\"\r\n                            placeholder=\"请选择\"\r\n                            class=\"fit-datePicker\"\r\n                            @change=\"(val) => changeDatePicker($index, val)\"\r\n                        />\r\n                    </el-form-item>\r\n                </el-form>\r\n            </template>\r\n            <template #operation=\"{ scope: { row, $index } }\">\r\n                <el-button type=\"primary\" link @click=\"uploadFile(row, $index)\">\r\n                    点击上传后，日期是必填的（请点击一下）\r\n                </el-button>\r\n            </template>\r\n        </ZpTablePage>\r\n        <el-button type=\"primary\" @click=\"submit\">确定</el-button>\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, reactive, onMounted } from 'vue';\r\nimport { ZpTablePage } from 'zp-element-plus';\r\nimport dayjs from 'dayjs';\r\n\r\nconst tablePageData = reactive({\r\n    tableConfig: {\r\n        loading: false,\r\n        columns: [\r\n            { label: '姓名', prop: 'aa', minWidth: 155 },\r\n            { label: '证书有效期', prop: 'bb', minWidth: 200, slotName: 'bb' },\r\n            { label: '操作', prop: 'operation', minWidth: 180, slotName: 'operation' }\r\n        ],\r\n        data: [\r\n            { aa: '张三', bb: null, cc: null },\r\n            { aa: '李四', bb: null, cc: null }\r\n        ]\r\n    }\r\n});\r\nconst formRefs = reactive([]);\r\n\r\n// 获取数据\r\nconst getData = () => {\r\n    let res = [\r\n        { aa: '张三', bb: null, cc: null },\r\n        { aa: '李四', bb: null, cc: null }\r\n    ];\r\n    tablePageData.tableConfig.data = res;\r\n    // 初始化表单引用\r\n    res.forEach(() => {\r\n        formRefs.push(ref(null));\r\n    });\r\n};\r\n// 上传文件\r\nconst uploadFile = (row, index) => {\r\n    tablePageData.tableConfig.data[index].bbb = true;\r\n};\r\n// change-时间\r\nconst changeDatePicker = (index, value) => {\r\n    tablePageData.tableConfig.data[index].bb = value && dayjs(value).format('YYYY-MM-DD');\r\n};\r\n// 提交\r\nconst submit = async () => {\r\n    formRefs.forEach((item) => {\r\n        item.value.validate((valid) => {\r\n            if (valid) {\r\n                console.log('成功', tablePageData.tableConfig.data);\r\n            } else {\r\n                console.log('失败');\r\n            }\r\n        });\r\n    });\r\n};\r\n\r\nonMounted(() => {\r\n    getData();\r\n});\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.fit {\r\n    :deep(.fit-datePicker) {\r\n        width: 140px;\r\n    }\r\n}\r\n</style>\r\n"],"names":["tablePageData","reactive","formRefs","getData","res","ref","uploadFile","row","index","changeDatePicker","value","dayjs","submit","item","valid","onMounted"],"mappings":"8NAgCA,MAAMA,EAAgBC,EAAS,CAC3B,YAAa,CACT,QAAS,GACT,QAAS,CACL,CAAE,MAAO,KAAM,KAAM,KAAM,SAAU,GAAK,EAC1C,CAAE,MAAO,QAAS,KAAM,KAAM,SAAU,IAAK,SAAU,IAAM,EAC7D,CAAE,MAAO,KAAM,KAAM,YAAa,SAAU,IAAK,SAAU,WAAa,CAC3E,EACD,KAAM,CACF,CAAE,GAAI,KAAM,GAAI,KAAM,GAAI,IAAM,EAChC,CAAE,GAAI,KAAM,GAAI,KAAM,GAAI,IAAM,CACnC,CACJ,CACL,CAAC,EACKC,EAAWD,EAAS,CAAA,CAAE,EAGtBE,EAAU,IAAM,CAClB,IAAIC,EAAM,CACN,CAAE,GAAI,KAAM,GAAI,KAAM,GAAI,IAAM,EAChC,CAAE,GAAI,KAAM,GAAI,KAAM,GAAI,IAAM,CACxC,EACIJ,EAAc,YAAY,KAAOI,EAEjCA,EAAI,QAAQ,IAAM,CACdF,EAAS,KAAKG,EAAI,IAAI,CAAC,CAC/B,CAAK,CACL,EAEMC,EAAa,CAACC,EAAKC,IAAU,CAC/BR,EAAc,YAAY,KAAKQ,CAAK,EAAE,IAAM,EAChD,EAEMC,EAAmB,CAACD,EAAOE,IAAU,CACvCV,EAAc,YAAY,KAAKQ,CAAK,EAAE,GAAKE,GAASC,EAAMD,CAAK,EAAE,OAAO,YAAY,CACxF,EAEME,EAAS,SAAY,CACvBV,EAAS,QAASW,GAAS,CACvBA,EAAK,MAAM,SAAUC,GAAU,CACvBA,EACA,QAAQ,IAAI,KAAMd,EAAc,YAAY,IAAI,EAEhD,QAAQ,IAAI,IAAI,CAEhC,CAAS,CACT,CAAK,CACL,EAEA,OAAAe,EAAU,IAAM,CACZZ,GACJ,CAAC"}