import{D as c,_ as B,r as O,k as V,o as j,c as P,a as m,q as _,t as A,p as L,d as G,E as T}from"./index-PeL4Jeqv.js";function R(t){return c.getCurrentScope()?(c.onScopeDispose(t),!0):!1}function F(t){return typeof t=="function"?t():c.unref(t)}const E=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const N=Object.prototype.toString,$=t=>N.call(t)==="[object Object]",H=()=>{};function J(t){let l;function e(){return l||(l=t()),l}return e.reset=async()=>{const s=l;l=void 0,s&&await s},e}function K(t,l,e={}){const{immediate:s=!0}=e,o=c.ref(!1);let n=null;function r(){n&&(clearTimeout(n),n=null)}function i(){o.value=!1,r()}function f(...d){r(),o.value=!0,n=setTimeout(()=>{o.value=!1,n=null,t(...d)},F(l))}return s&&(o.value=!0,E&&f()),R(i),{isPending:c.readonly(o),start:f,stop:i}}function Q(t=!1,l={}){const{truthyValue:e=!0,falsyValue:s=!1}=l,o=c.isRef(t),n=c.ref(t);function r(i){if(arguments.length)return n.value=i,n.value;{const f=F(e);return n.value=n.value===f?F(s):f,n.value}}return o?r:[n,r]}function k(t){var l;const e=F(t);return(l=e==null?void 0:e.$el)!=null?l:e}const I=E?window:void 0,U=E?window.document:void 0,W=E?window.navigator:void 0;function C(...t){let l,e,s,o;if(typeof t[0]=="string"||Array.isArray(t[0])?([e,s,o]=t,l=I):[l,e,s,o]=t,!l)return H;Array.isArray(e)||(e=[e]),Array.isArray(s)||(s=[s]);const n=[],r=()=>{n.forEach(a=>a()),n.length=0},i=(a,p,g,y)=>(a.addEventListener(p,g,y),()=>a.removeEventListener(p,g,y)),f=c.watch(()=>[k(l),F(o)],([a,p])=>{if(r(),!a)return;const g=$(p)?{...p}:p;n.push(...e.flatMap(y=>s.map(b=>i(a,y,b,g))))},{immediate:!0,flush:"post"}),d=()=>{f(),r()};return R(d),d}function X(){const t=c.ref(!1),l=c.getCurrentInstance();return l&&c.onMounted(()=>{t.value=!0},c.isVue2?void 0:l),t}function M(t){const l=X();return c.computed(()=>(l.value,!!t()))}function z(t,l={}){const{controls:e=!1,navigator:s=W}=l,o=M(()=>s&&"permissions"in s);let n;const r=typeof t=="string"?{name:t}:t,i=c.ref(),f=()=>{n&&(i.value=n.state)},d=J(async()=>{if(o.value){if(!n)try{n=await s.permissions.query(r),C(n,"change",f),f()}catch{i.value="prompt"}return n}});return d(),e?{state:i,isSupported:o,query:d}:i}function Y(t={}){const{navigator:l=W,read:e=!1,source:s,copiedDuring:o=1500,legacy:n=!1}=t,r=M(()=>l&&"clipboard"in l),i=z("clipboard-read"),f=z("clipboard-write"),d=c.computed(()=>r.value||n),a=c.ref(""),p=c.ref(!1),g=K(()=>p.value=!1,o);function y(){r.value&&u(i.value)?l.clipboard.readText().then(v=>{a.value=v}):a.value=x()}d.value&&e&&C(["copy","cut"],y);async function b(v=F(s)){d.value&&v!=null&&(r.value&&u(f.value)?await l.clipboard.writeText(v):S(v),a.value=v,p.value=!0,g.start())}function S(v){const w=document.createElement("textarea");w.value=v??"",w.style.position="absolute",w.style.opacity="0",document.body.appendChild(w),w.select(),document.execCommand("copy"),w.remove()}function x(){var v,w,q;return(q=(w=(v=document==null?void 0:document.getSelection)==null?void 0:v.call(document))==null?void 0:w.toString())!=null?q:""}function u(v){return v==="granted"||v==="prompt"}return{isSupported:d,text:a,copied:p,copy:b}}function Z(t,l,e={}){const{window:s=I,...o}=e;let n;const r=M(()=>s&&"ResizeObserver"in s),i=()=>{n&&(n.disconnect(),n=void 0)},f=c.computed(()=>Array.isArray(t)?t.map(p=>k(p)):[k(t)]),d=c.watch(f,p=>{if(i(),r.value&&s){n=new ResizeObserver(l);for(const g of p)g&&n.observe(g,o)}},{immediate:!0,flush:"post"}),a=()=>{i(),d()};return R(a),{isSupported:r,stop:a}}const D=["fullscreenchange","webkitfullscreenchange","webkitendfullscreen","mozfullscreenchange","MSFullscreenChange"];function ee(t,l={}){const{document:e=U,autoExit:s=!1}=l,o=c.computed(()=>{var u;return(u=k(t))!=null?u:e==null?void 0:e.querySelector("html")}),n=c.ref(!1),r=c.computed(()=>["requestFullscreen","webkitRequestFullscreen","webkitEnterFullscreen","webkitEnterFullScreen","webkitRequestFullScreen","mozRequestFullScreen","msRequestFullscreen"].find(u=>e&&u in e||o.value&&u in o.value)),i=c.computed(()=>["exitFullscreen","webkitExitFullscreen","webkitExitFullScreen","webkitCancelFullScreen","mozCancelFullScreen","msExitFullscreen"].find(u=>e&&u in e||o.value&&u in o.value)),f=c.computed(()=>["fullScreen","webkitIsFullScreen","webkitDisplayingFullscreen","mozFullScreen","msFullscreenElement"].find(u=>e&&u in e||o.value&&u in o.value)),d=["fullscreenElement","webkitFullscreenElement","mozFullScreenElement","msFullscreenElement"].find(u=>e&&u in e),a=M(()=>o.value&&e&&r.value!==void 0&&i.value!==void 0&&f.value!==void 0),p=()=>d?(e==null?void 0:e[d])===o.value:!1,g=()=>{if(f.value){if(e&&e[f.value]!=null)return e[f.value];{const u=o.value;if((u==null?void 0:u[f.value])!=null)return!!u[f.value]}}return!1};async function y(){if(!(!a.value||!n.value)){if(i.value)if((e==null?void 0:e[i.value])!=null)await e[i.value]();else{const u=o.value;(u==null?void 0:u[i.value])!=null&&await u[i.value]()}n.value=!1}}async function b(){if(!a.value||n.value)return;g()&&await y();const u=o.value;r.value&&(u==null?void 0:u[r.value])!=null&&(await u[r.value](),n.value=!0)}async function S(){await(n.value?y():b())}const x=()=>{const u=g();(!u||u&&p())&&(n.value=u)};return C(e,D,x,!1),C(()=>k(o),D,x,!1),s&&R(y),{isSupported:a,isFullscreen:n,enter:b,exit:y,toggle:S}}const h=t=>(L("data-v-439f2056"),t=t(),G(),t),te=h(()=>m("p",null,"(1) useClipboard 复制文本到剪切板",-1)),ne=h(()=>m("br",null,null,-1)),le=h(()=>m("br",null,null,-1)),oe=h(()=>m("p",null,"(2) useToggle 类似 react 中的 useState",-1)),ue=h(()=>m("br",null,null,-1)),se=h(()=>m("p",null,"(3) 监听DOM元素",-1)),re=h(()=>m("br",null,null,-1)),ie=h(()=>m("p",null,"(4)全屏",-1)),ce={__name:"index",setup(t){const l=O("一段内容"),e=O(),s=O(),{copy:o,isSupported:n}=Y(),[r,i]=Q(!1);Z(e,()=>{console.log("盒子的宽",e.value.offsetWidth)});const{isFullscreen:d,toggle:a}=ee(),p=()=>{l.value="新的一段内容"},g=async()=>{n||T.error("复制失败");try{await o(l.value),T.success("已复制")}catch(y){T.error(y.message)}};return V(()=>{console.log(E?"在客户端环境中执行":"在服务端环境中执行")}),(y,b)=>(j(),P("div",null,[te,m("button",{onClick:g},"复制文本"),m("button",{onClick:p},"修改需要copy的内容"),ne,le,oe,m("button",{onClick:b[0]||(b[0]=S=>_(i)(!_(r)))},"切换状态"),m("p",null,A(_(r)?"打开":"关闭"),1),ue,se,m("div",{ref_key:"divRef",ref:e,class:"box"},"div内容",512),re,ie,m("button",{onClick:b[1]||(b[1]=(...S)=>_(a)&&_(a)(...S))},"进入/退出全屏"),m("p",{ref_key:"pRef",ref:s},A(_(d)?"全屏":"小屏"),513)]))}},fe=B(ce,[["__scopeId","data-v-439f2056"]]);export{fe as default};
//# sourceMappingURL=index-dkCgQEuX.js.map
